import pandas as pd
import matplotlib.pyplot as plt
from datetime import datetime
import numpy as np
import yfinance as yf


df = pd.read_csv("all_stocks_5yr.csv")
#real time stocks
end = datetime.now()
start = datetime(end.year -1, end.month, end.day)

df_aapl = yf.download("AAPL", start, end, interval = "1d")
df_amzn = yf.download("AMZN", start, end, interval = "1d")
df_tsla = yf.download("TSLA", start, end, interval = "1d")
df_fb = yf.download("FB", start, end, interval = "1d")
df_SP500 = yf.download("^GSPC", start, end, interval = "1d")

dfnew_list = [df_aapl, df_amzn, df_tsla, df_fb, df_SP500]
dfnew_name = ["AAPL", "AMZN", "TSLA", "FB", "SP500"]

for df, com_name in zip(dfnew_list, dfnew_name):
    df["dfnew_name"] = com_name

df_new = pd.concat(dfnew_list, axis=0)
print(df_new.tail(10))


plt.figure(figsize=(15,5))
plt.plot(top=1.25, bottom=1.2)


for i, df in enumerate(dfnew_list, 1):
    plt.plot(1, 2, i)
    df_new["Close"].plot()
    plt.ylabel("Close Price")
    plt.xlabel("Month")
    plt.title(f"Closing Price of {dfnew_name[i-1]}")

plt.show()


#Analyse data






